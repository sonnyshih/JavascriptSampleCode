<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Handle Value Demo</title>

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

<script type="text/javascript">
	// 完整寫法 (取代<body onload="...">)
//	$(document).ready(function(){
		//在網頁載入完成後，開始初始化工作
		
//	});
	
	//簡寫法
	$(function(){
//		在網頁載入完成後，開始初始化工作

		initInputSelect();
		initButton();
		initSelect();
		alert("hello data-xyz = " + $("#hello").attr("data-xyz"));		

	});
	
	function initInputSelect(){
		
		$( "#item" ).change(function() {
			var val = $(this).val()
		    var xyz = $('#items option').filter(function() {
		        return this.value == val;
		    }).data('xyz');
		    
		    /* if value doesn't match an option, xyz will be undefined*/
		    var msg = xyz ? 'xyz=' + xyz : 'No Match';
		    alert("change:" + msg);
		});
	}
	
	function initButton(){
		$("#button").click(function() {
		    var val = $('#item').val()
		    var xyz = $('#items option').filter(function() {
		        return this.value == val;
		    }).data('xyz');
		    
		    /* if value doesn't match an option, xyz will be undefined*/
		    var msg = xyz ? 'xyz=' + xyz : 'No Match';
		    alert(msg)

		});		
		
	}
	
	function initSelect(){
		$( "#company" ).change(function() {
			alert( "取得 value = "+$(this).val() );
			alert( "取得 data-id prop = "+ $(this).find(':selected').attr('data-id'));
		});
	}

</script>

</head>
<body>

可輸入下拉選單:
<input list="items" id="item">
<datalist id="items">
  <option value="A item"  data-xyz = "1" >
  <option value="aa item" data-xyz = "2" >
  <option value="C item"  data-xyz = "3" >
  <option value="D item"  data-xyz = "4" >
  <option value="E item"  data-xyz = "5" >
</datalist> 

<input type="button" id="button" value="Get xyz" />

<br><br><br>
一般下拉選單: 
	<select class="form-control" id="company" name="company">
		<option>請選擇</option>
       	<option value="1" data-id="a1">aaaa</option>
       	<option value="2" data-id="a2">bbbb</option>
       	<option value="3" data-id="a3">cccc</option>
       	<option value="4" data-id="a4">dddd</option>
	</select>

<br><br><br>
hello: <input type="text" id="hello" name="hello" data-xyz="aaa">
<br>

</body>

</html>